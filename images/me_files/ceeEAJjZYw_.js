if (self.CavalryLogger) { CavalryLogger.start_js(["H\/9Of"]); }

__d("JSLoggerImpl",["Arbiter","AsyncRequest","Banzai","BanzaiODS","Env","ErrorUtils","JSLogger","JSLoggerConfig","SystemEvents","emptyFunction","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();var g=b("BanzaiODS").create(),h=b("JSLogger")._,i,j="/ajax/chat/jslogger.php",k=b("JSLogger").create("jslogger"),l=-1,m=null,n={enabled_categories:null,categories:null,send_min:7500,send_max:6e4};function o(a){return b("JSLoggerConfig")[a]||n[a]}function p(a){var b=o("enabled_categories")||{};a=a in b?b[a]:b.__default;return a}function q(a,b,c){}function r(a){if(console&&console[a.type]&&m&&m.test(a.cat)){var b=/(\d\d:\d\d:\d\d)/.test(new Date(a.date))&&RegExp.$1;b=b+" "+a.cat+":"+a.event;a.data?console[a.type](b,JSON.parse(a.data)):console[a.type](b)}}function s(a){var c={page_id:h.pageId,env_start:b("Env").start,now:Date.now()};a?(b("Arbiter").inform(b("JSLogger").DUMP_EVENT,a),c.dumpData=a,c.log=b("JSLogger").getEntries()):(c.log=b("JSLogger").getEntries(function(a){return/log|warn|error/.test(a.type)&&p(a.cat)},i),i=h.head,c.counts=h.counts,h.counts={});return c}function t(a,c,d){__p&&__p();var e=s(a);if(!a){var f=!1;for(var h in e.counts)f=f||h!="jslogger";if(!f&&e.log.length<=0)return}if(b("Banzai").isEnabled("jslogger"))delete e.counts,b("Banzai").post("jslogger",e,{delay:0}),g.flush();else{e=JSON.stringify(e);f=new(b("AsyncRequest"))().setURI(j+(a?"?dump=1":"")).setMethod("POST").setData({clientState:e}).setReadOnly(!0).setAllowCrossPageTransition(!0);c&&f.setHandler(c);f.setErrorHandler(d||b("emptyFunction"));f.send()}}function u(){var a=o("send_min"),c=o("send_max");a=a*Math.pow(2,l+1);l>=0&&!h.forwarding&&(k.bump("send_t"+(a<=c?l:"max")),t());l++;a*=.75+Math.random()/2;b("setTimeoutAcrossTransitions")(u,a)}var v=h.logAction;h.logAction=function(a,c,d){q(this.type,this.cat,a);var e=v.apply(this,arguments);b("Banzai").isEnabled("jslogger")&&(this.type=="bump"?g.bumpEntityKey(2966,this.cat,a,c):this.type=="rate"&&g.bumpFraction(2966,this.cat,a,c?d:0,d));if(e){r(e);while(i&&h.head.seq-i.seq>h.MAX_HISTORY)i=i.next,k.bump("dropped_entries")}};Object.assign(b("JSLogger"),{setConsoleFilter:function(a){a instanceof RegExp||(a=a?new RegExp(a):null),m=a},replay:function(){for(var a=h.tail;a;a=a.next)r(a)},getDumpJSON:function(a){return s({})},submitDump:function(a,b){t(a||{},function(a){a=a.getPayload();b(a)},function(){b(null)})},dump:function(a){this.submitDump(a,function(a){a?prompt("JSLogger dump now available at:",a):alert("Error while sending JSLogger dump")})}});u();for(var a=h.tail;a;a=a.next)r(a);var w=b("JSLogger").create("sys");b("ErrorUtils").addListener(function(a){a.message=="Script error."?(w.bump("xdomain_error"),w.debug("xdomain_error")):w.error("uncaught_exception",a)});b("SystemEvents").subscribe(b("SystemEvents").ONLINE,function(a,b){w.warn(b?"online":"offline")});b("SystemEvents").subscribe(b("SystemEvents").USER,function(a,b){w.warn("user",{user:b})});b("SystemEvents").subscribe(b("SystemEvents").TIME_TRAVEL,function(a,b){w.warn("time_travel",{dt:b})})}),null);